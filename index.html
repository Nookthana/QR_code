<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="./node_modules/html5-qrcode/html5-qrcode.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <title>Document</title>
</head>
<body>


      <div class="card-group">
        <div class="card">
    

            <div id="reader"></div>

        </div>
        <div class="card">
     
          <div class="card-body">
            <table class="table">
                <thead>
                  <tr>
                    <th scope="col">ลำดับ</th>
                    <th scope="col">รูปแบบ</th>
                    <th scope="col">ข้อมูล</th>
                  </tr>
                </thead>
                <tbody id="res">
               
                </tbody>
              </table>
      
          </div>
        </div>

</body>
</html>

<script>

    const DataScanName = [];
    const DataScanType = [];

 
    var html5QrcodeScanner = new Html5QrcodeScanner(
    "reader", { fps: 10, qrbox: 250 });
        
function onScanSuccess(decodedText, decodedResult) {


    console.log(`Scan result: ${decodedText}`, decodedResult);
    DataScanName.push(decodedText);
    DataScanType.push(decodedResult.result.format.formatName);


    const uniqueDataScanName = [...new Set(DataScanName)];
    const uniqueDataScanType = [...new Set(DataScanType)];
    //let Rows = count(uniqueDataScanName);
    
  
    //console.log(DataScanType)

    let column = document.createElement('tr');
    let rows = document.createElement('td');
    let format = document.createElement('td');
    let data_name = document.createElement('td');
    



    for (let i = 0; i < uniqueDataScanName.length; i++) {

                rows.innerHTML = uniqueDataScanName[i];
               // console.log("Log i Round"+i,uniqueDataScanName[i]);
                //console.log("Log unique",uniqueDataScanName);

                console.log(i, uniqueDataScanName[i], uniqueDataScanName);

                document.getElementById('res').appendChild(column);
                column.appendChild(rows); 
 
    }
     


    //column.appendChild(rows);
   // format.innerHTML = decodedText;
    //data_name.innerHTML = decodedResult.result.format.formatName;


    

       // document.getElementById('res').appendChild(column); 


   
    //document.getElementById('res').appendChild(data_name);

   //e.appendChild(uniqueDataScanName);
   //const format = document.getElementById("rows").innerHTML += gg;
  // const data = document.getElementById("format").innerHTML += '<td>'+DataScanType+'</td>';


       
      
      
html5QrCode.stop().then((ignore) => {
  // QR Code scanning is stopped.
}).catch((err) => {
  // Stop failed, handle it.
});                                                


    
      



}

html5QrcodeScanner.render(onScanSuccess);

//console.log(uniqueDataScanName)

</script>